<!DOCTYPE html>
<html>
<head>
    <title>FeeDLooP Compression Test</title>
</head>
<body>
    <h1>FeeDLooP Compression Test</h1>
    <button onclick="generateLargeLogs()">Generate Large Console Logs</button>
    <button onclick="testWidget()">Open Widget</button>

    <script src="/widget/dist/feedloop-widget.min.js" data-project-key="qqa6gF2deJypP3VKEYODxu31yQLaygYz"></script>

    <script>
        // Generate a lot of console logs to test compression
        function generateLargeLogs() {
            console.log('Starting large log generation...');

            // Generate 100 verbose console logs
            for (let i = 0; i < 100; i++) {
                console.log(`Detailed log entry ${i}: This is a very long log message that contains a lot of information about the state of the application, including various data structures, user interactions, API responses, and debugging information that would typically be found in a production environment. The timestamp is ${new Date().toISOString()} and the iteration number is ${i}.`);

                // Add some errors and warnings
                if (i % 10 === 0) {
                    console.error(`Error ${i}: Something went wrong in the application at iteration ${i}. This error contains detailed stack trace information and context about what the user was doing when the error occurred.`);
                }
                if (i % 7 === 0) {
                    console.warn(`Warning ${i}: This is a warning message that indicates a potential issue that should be investigated. The warning occurred at ${new Date().toISOString()}.`);
                }
            }

            // Generate some large object logs
            for (let i = 0; i < 20; i++) {
                const largeObject = {
                    id: i,
                    timestamp: new Date().toISOString(),
                    userData: {
                        name: `User ${i}`,
                        email: `user${i}@example.com`,
                        preferences: {
                            theme: 'dark',
                            language: 'en',
                            notifications: true,
                            privacy: {
                                shareData: false,
                                analytics: true,
                                cookies: ['essential', 'analytics', 'marketing']
                            }
                        }
                    },
                    appState: {
                        currentPage: '/dashboard',
                        loadedModules: ['auth', 'dashboard', 'analytics', 'reports'],
                        featureFlags: {
                            newDesign: true,
                            betaFeatures: false,
                            experimentalAPI: true
                        }
                    },
                    metrics: {
                        pageLoadTime: Math.random() * 3000,
                        apiResponseTimes: [
                            { endpoint: '/api/user', time: Math.random() * 500 },
                            { endpoint: '/api/dashboard', time: Math.random() * 800 },
                            { endpoint: '/api/analytics', time: Math.random() * 1200 }
                        ]
                    }
                };
                console.log('Large object data:', largeObject);
            }

            console.log('Large log generation completed! Now the widget should compress this data when submitting.');
            alert('Generated large console logs! Open the widget and submit a report to test compression.');
        }

        function testWidget() {
            if (window.FeeDLooPWidget) {
                window.FeeDLooPWidget.open();
            }
        }
    </script>
</body>
</html>